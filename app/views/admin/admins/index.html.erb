<%= card do %>
  <%= render "admin/users/tabs" %>

  <%= data_table collection: @users,
                 pagy: @pagy,
                 namespace: :admin,
                 new_record_modal: true,
                 new_record_url: new_admin_admin_path,
                 keyword_search_url: admin_admins_path do |table| %>
    <% table.column :name do |user| %>
      <%= link_to user.name, edit_admin_admin_path(user), class: "text-amber-500 hover:underline hover:text-amber-600 font-medium", data: { turbo_frame: "application_modal" } %>
    <% end %>
    <% table.column :email %>
    <% table.column :phone %>
    <% table.column "", sortable: false do |user| %>
      <% render "shared/dropdown", { id: dom_id(user, :admin) } do %>
        <% if user.deactivated? %>
          <%= dropdown_link_to "Activate",
                               admin_admin_path(user, user_admin: { active: true }),
                               data: { turbo_method: "patch", turbo_frame: "_top" },
                               class: "block px-4 py-2 hover:bg-gray-100 text-sm text-green-500 hover:text-green-700" %>
        <% else %>
          <%= dropdown_link_to "Deactivate",
                               admin_admin_path(user),
                               data: { turbo_method: "delete", turbo_frame: "_top" },
                               class: "block px-4 py-2 hover:bg-gray-100 text-sm text-red-500 hover:text-red-700" %>
        <% end %>
      <% end %>
    <% end %>
  <% end %>
<% end %>
